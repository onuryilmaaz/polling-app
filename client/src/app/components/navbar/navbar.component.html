<div class="w-full border-b bg-white shadow-sm">
  <div class="container mx-auto px-4 py-3">
    <div class="flex items-center justify-between">
      <!-- Logo Section -->
      <div class="flex items-center gap-2">
        <a routerLink="/" class="flex items-center gap-2">
          <div
            class="flex h-10 w-10 items-center justify-center rounded-md bg-primary text-white"
          >
            <span class="material-icons">poll</span>
          </div>
          <span class="text-lg font-semibold text-gray-900">POLLING-APP</span>
        </a>
      </div>

      <!-- Desktop Navigation -->
      <div class="hidden md:block">
        @if(isLoggedIn()){
        <div *ngIf="authService.getUserDetail() as userDetail">
          <div class="flex items-center gap-4">
            <button
              [matMenuTriggerFor]="menu"
              class="flex items-center gap-3 rounded-full px-3 py-2 hover:bg-gray-100 transition-colors"
            >
              <div
                class="flex h-9 w-9 shrink-0 items-center justify-center rounded-full bg-blue-600 text-white font-medium shadow"
              >
                {{ userDetail!.fullName[0].toUpperCase() }}
              </div>
              <div class="flex flex-col items-start">
                <span class="text-sm font-medium leading-none">{{
                  userDetail?.fullName
                }}</span>
                <span class="text-xs text-gray-500 mt-1">{{
                  userDetail?.roles
                }}</span>
              </div>
              <span class="material-icons text-gray-500 text-sm"
                >expand_more</span
              >
            </button>

            <mat-menu #menu="matMenu" class="modern-menu">
              @if(userDetail.roles == 'Admin'){
              <a
                routerLink="/users"
                mat-menu-item
                class="flex items-center gap-3 py-2"
              >
                <span class="material-icons text-gray-600">group</span>
                <span>Users List</span>
              </a>
              <a
                routerLink="/poll-create"
                mat-menu-item
                class="flex items-center gap-3 py-2"
              >
                <span class="material-icons text-gray-600">create</span>
                <span>Poll Create</span>
              </a>
              <a
                routerLink="/polls"
                mat-menu-item
                class="flex items-center gap-3 py-2"
              >
                <span class="material-icons text-gray-600">list</span>
                <span>Poll List</span>
              </a>
              <div class="border-t my-1"></div>
              }
              <button
                (click)="logout()"
                mat-menu-item
                class="flex items-center gap-3 py-2 text-red-600"
              >
                <span class="material-icons">logout</span>
                <span>Logout</span>
              </button>
            </mat-menu>
          </div>
        </div>
        } @else {
        <div class="flex items-center gap-3">
          <a
            routerLink="/login"
            class="px-4 py-2 text-sm font-medium text-gray-700 rounded-md hover:bg-gray-100 transition-colors"
          >
            Login
          </a>
          <a
            routerLink="/register"
            class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors"
          >
            Register
          </a>
        </div>
        }
      </div>

      <!-- Mobile Navigation -->
      <div class="md:hidden">
        <button
          mat-icon-button
          [matMenuTriggerFor]="mobileMenu"
          aria-label="Toggle menu"
          class="flex h-10 w-10 items-center justify-center rounded-md hover:bg-gray-100"
        >
          <span class="material-icons">menu</span>
        </button>

        <mat-menu #mobileMenu="matMenu" class="modern-menu">
          @if(isLoggedIn()){
          <div
            *ngIf="authService.getUserDetail() as userDetail"
            class="px-4 py-3 border-b"
          >
            <div class="flex items-center gap-3">
              <div
                class="flex h-9 w-9 items-center justify-center rounded-full bg-blue-600 text-white font-medium shadow"
              >
                {{ userDetail!.fullName[0].toUpperCase() }}
              </div>
              <div class="flex flex-col">
                <span class="text-sm font-medium">{{
                  userDetail?.fullName
                }}</span>
                <span class="text-xs text-gray-500">{{
                  userDetail?.roles
                }}</span>
              </div>
            </div>
          </div>

          <a
            routerLink="/users"
            mat-menu-item
            class="flex items-center gap-3 py-2"
          >
            <span class="material-icons text-gray-600">group</span>
            <span>Users List</span>
          </a>
          <a
            routerLink="/poll-create"
            mat-menu-item
            class="flex items-center gap-3 py-2"
          >
            <span class="material-icons text-gray-600">create</span>
            <span>Poll Create</span>
          </a>
          <a
            routerLink="/polls"
            mat-menu-item
            class="flex items-center gap-3 py-2"
          >
            <span class="material-icons text-gray-600">list</span>
            <span>Poll List</span>
          </a>
          }

          <button
            (click)="logout()"
            mat-menu-item
            class="flex items-center gap-3 py-2 text-red-600"
          >
            <span class="material-icons">logout</span>
            <span>Logout</span>
          </button>

          <a
            routerLink="/login"
            mat-menu-item
            class="flex items-center gap-3 py-2"
          >
            <span class="material-icons text-gray-600">login</span>
            <span>Login</span>
          </a>
          <a
            routerLink="/register"
            mat-menu-item
            class="flex items-center gap-3 py-2"
          >
            <span class="material-icons text-gray-600">person_add</span>
            <span>Register</span>
          </a>
        </mat-menu>
      </div>
    </div>
  </div>
</div>
